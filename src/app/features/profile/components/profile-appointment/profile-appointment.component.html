<div class="grid">
    <div class="col-12 md:col-12">
        <div class="card appointment-card">
            <ng-container *ngIf="($appointment | async) as appointment; else loading">
                <ng-container *ngFor="let item of appointment">
                    <p-card [header]="(item.date | date : 'dd.MM.YYYY') ?? 'Sana balgilanmagan'" [subheader]="item.patient.fullname">
                        <ng-template pTemplate="header">
                        </ng-template>
                        <p *ngFor="let service of item.services">
                            xizmat: {{service.service.name}} - doktor: {{service.staff.fullname}} - 
                            narx: <span>{{service.price}} so'm</span>
                            navbat: <span>{{service.queue_list.date}} - {{service.queue_list.number}}</span>
                        </p>
                        <p *ngIf="item.discount">
                            jami: {{item.price * 100/ (1 - item.discount)}} so'm * {{item.discount}} % = {{item.price}} so'm
                        </p>
                        <p *ngIf="!item.discount">
                            jami: {{item.price}} so'm
                        </p>
                        <ng-template pTemplate="footer">
                            <div class="flex gap-3 mt-1">
                                <!-- <p-button label="Cancel" severity="secondary" class="w-full" styleClass="w-full" />
                                <p-button label="Save" class="w-full" styleClass="w-full" /> -->
                            </div>
                        </ng-template>
                    </p-card>
                </ng-container>
            </ng-container>

            <ng-template #loading>
                <div class="col-12 my-6 py-6">
                    <div class="spinner">
                        <p-progressSpinner ariaLabel="loading" />
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
</div>